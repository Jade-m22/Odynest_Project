<h1 class="user-dashboard-title">Tableau de bord</h1>

<% if current_user.is_admin? %>
  <section class="user-dashboard-section">
    <h2 class="user-dashboard-section-title playfair-bold">Liste des expériences en cours</h2>
    <table class="user-dashboard-table">
      <thead>
        <tr>
          <th>Expérience</th>
          <th>Lieu</th>
          <th>Participants</th>
        </tr>
      </thead>
      <tbody>
        <% @experiences.each do |experience| %>
          <tr>
            <td><%= link_to experience.title, experience_path(experience) %></td>
            <td><%= experience.location %></td>
            <td>
              <% experience.users.each do |user| %>
                <%= user.email %><br>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>

  <section class="user-dashboard-section">
    <h2 class="user-dashboard-section-title playfair-bold">Gestion</h2> 
    <%= link_to "Voir tous les utilisateurs", users_path, class: "user-dashboard-btn user-dashboard-btn-primary" %>
    <%= link_to "Voir tous les providers", providers_path, class: "user-dashboard-btn user-dashboard-btn-secondary" %>
  </section>

<% else %>
  <section class="user-dashboard-section">
    <h2 class="user-dashboard-section-title playfair-bold">Mes Expériences Réservées</h2>
    <% if @experiences.any? %>
      <table class="user-dashboard-table">
        <thead>
          <tr>
            <th>Expérience</th>
            <th>Lieu</th>
            <th>Date Réservée</th>
          </tr>
        </thead>
        <tbody>
          <% @reservations.each do |reservation| %>
            <tr>
              <td><%= link_to reservation.experience.title, experience_path(reservation.experience) %></td>
              <td><%= reservation.experience.location %></td>
              <td><%= l(reservation.reservation_date, format: :long) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p>Vous n'avez réservé aucune expérience pour l'instant.</p>
    <% end %>
  </section>
<% end %>
